# 📧 郵件功能設定指南

## 🎯 **功能說明**
客戶填寫預約表單後，系統會自動發送格式化的郵件到 `fixmastertw@gmail.com`，包含完整的預約資訊。

---

## 🔧 **Gmail 設定步驟**

### 1. **啟用 Gmail 應用程式密碼**

1. 前往 [Google 帳戶設定](https://myaccount.google.com/)
2. 點選左側選單「安全性」
3. 在「登入 Google」區塊中，點選「應用程式密碼」
4. 選擇「郵件」和「其他 (自訂名稱)」
5. 輸入「FixMaster 網站」作為應用程式名稱
6. 點選「產生」
7. 複製產生的 16 位密碼

### 2. **環境變數設定**

在專案根目錄創建 `.env.local` 檔案：

```bash
# 郵件設定
EMAIL_USER=fixmastertw@gmail.com
EMAIL_PASSWORD=your-16-digit-app-password

# 網站設定
NEXT_PUBLIC_SITE_URL=https://fixmastertw.com
```

**重要提醒：**
- 請勿將 `.env.local` 檔案提交到 Git
- 應用程式密碼不是您的 Gmail 登入密碼
- 保管好應用程式密碼，遺失需重新產生

---

## 📋 **郵件範本內容**

### **郵件主旨**
```
FixMaster 維修預約 - [客戶姓名] ([裝置型號])
```

### **郵件內容**
- 🎨 **HTML 格式**: 專業的表格式佈局
- 📱 **客戶資訊**: 姓名、電話、裝置、問題類型
- ⏰ **預約時間**: 客戶希望的維修時間
- 💬 **補充說明**: 客戶的額外描述
- 🕒 **提交時間**: 自動記錄表單提交時間

### **備用方案**
如果 API 發送失敗，系統會：
1. 自動開啟客戶的預設郵件程式
2. 預填郵件內容到 `fixmastertw@gmail.com`
3. 提示客戶手動寄送

---

## 🚀 **安裝依賴套件**

```bash
npm install nodemailer @types/nodemailer
```

---

## 🔍 **測試郵件功能**

### 1. **開發環境測試**
```bash
npm run dev
```

### 2. **填寫測試表單**
- 前往 Contact Section
- 填寫完整表單資訊
- 點選「送出預約」
- 檢查 `fixmastertw@gmail.com` 信箱

### 3. **檢查 Console 日誌**
- 成功：顯示 `Email sent successfully: [messageId]`
- 失敗：顯示錯誤訊息和備用方案

---

## ⚠️ **注意事項**

### **安全性**
- 絕不在前端代碼中暴露郵件密碼
- 使用環境變數保護敏感資訊
- 定期更換應用程式密碼

### **郵件限制**
- Gmail 每日發送限制：500 封
- 建議監控發送量避免超限
- 考慮使用專業郵件服務 (如 SendGrid)

### **錯誤處理**
- API 失敗時自動啟用 mailto 備用方案
- 提供客戶電話聯絡替代方式
- 記錄錯誤日誌便於除錯

---

## 📈 **進階功能建議**

### **郵件增強**
- 📧 **自動回覆**: 發送確認郵件給客戶
- 📊 **統計追蹤**: 記錄預約數量和來源
- 🔔 **即時通知**: 整合 LINE Notify 或 Slack
- 📱 **簡訊通知**: 整合簡訊 API 服務

### **資料管理**
- 💾 **資料庫儲存**: 儲存預約記錄
- 📋 **管理後台**: 查看和管理預約
- 📈 **分析報表**: 客戶來源和需求分析

---

*最後更新：2024年3月15日*
*郵件目標：fixmastertw@gmail.com*
*備用聯絡：02-2816-6666* 